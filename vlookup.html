<!DOCTYPE html>
<html lang="en">
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>

<head>
    <title>VLOOKUP</title>
</head>

<body>
    <input id="input_table1" placeholder="Ievadi pirmo tabulu">
    <input id="input_table2" placeholder="Ievadi otro tabulu">
    <input id="parameters" placeholder="Ievadied parameteru">
    <button onclick="tables();" id="input_table1" id="input_table2" id="parameters">Izveido tabulas</button>

    <script type="text/javascript" language="javascript">

        function tables(){
            let input_table1 = JSON.parse(document.getElementById("input_table1").value);
            console.log(input_table1)

            let input_table2 = JSON.parse(document.getElementById("input_table2").value);
            console.log(input_table2)

            parameters = document.getElementById("parameters").value;
            console.log(parameters)
        
            function all_employees_salary(table1, table2, parameters) {

                let table1_array = table1.map(table1_code => {
                    let table2_array = table2.find(table2_code => table2_code[parameters] === table1_code[parameters])
                    return { ...table1_code, ...table2_array }
                })

                let table2_array = table2.map(table2_code => {
                    let table1_array = table1.find(table1_code => table1_code[parameters] === table2_code[parameters])
                    return { ...table2_code, ...table1_array }
                })

                let employees_salary = table2_array.concat(table1_array)

                let filtered_employees_salary = [...new Map(employees_salary.map(dup => [dup[parameters], dup])).values()]

                output(filtered_employees_salary)
                
            }

            function output(table1){
                console.log(table1)
            }

            all_employees_salary(input_table1, input_table2, parameters)

        }

    </script>
</body>